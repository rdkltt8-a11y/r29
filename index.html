<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ê–Ω–∂–µ–ª–∞ ‚Ä¢ –ü—Ä–µ–º–∏—É–º –º–∞–Ω–∏–∫—é—Ä –ú–∞—Ä–∏—É–ø–æ–ª—å</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --rose: #e11d48;
            --soft: #fdf2f8;
        }
        body { font-family: 'Inter', system-ui, sans-serif; }
        .logo-font { font-family: 'Playfair Display', serif; }
        .hero-bg {
            background: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.6)), url('https://images.unsplash.com/photo-1604654894610-df63bc536371?ixlib=rb-4.0.3&auto=format&fit=crop&w=2000&q=80') center/cover no-repeat fixed;
        }
        .time-slot {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .time-slot.booked {
            background: #fee2e2 !important;
            color: #991b1b;
            cursor: not-allowed;
        }
        .time-slot.available:hover {
            transform: scale(1.08);
            background: #fce7f3;
        }
    </style>
</head>
<body class="bg-[#fdf2f8] text-zinc-800">

    <!-- NAV -->
    <nav class="fixed top-0 w-full bg-white/95 backdrop-blur-xl z-50 border-b border-rose-100">
        <div class="max-w-6xl mx-auto px-5 py-5 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <span class="text-4xl">üíÖ</span>
                <span class="logo-font text-3xl font-bold text-rose-600">–ê–Ω–∂–µ–ª–∞</span>
            </div>
            <a href="tel:+79498370146" class="bg-rose-600 text-white px-4 py-2.5 rounded-3xl font-medium flex items-center gap-2 text-sm md:text-base">
                <i class="fa-solid fa-phone"></i> +7 949 837-01-46
            </a>
        </div>
    </nav>

    <!-- HERO -->
    <section class="hero-bg min-h-screen flex items-center text-white pt-20">
        <div class="max-w-5xl mx-auto px-6 text-center">
            <div class="text-sm tracking-[3px] mb-4">–ú–ê–†–ò–£–ü–û–õ–¨ ‚Ä¢ –ß–ï–†–Å–ú–£–®–ö–ò</div>
            <h1 class="logo-font text-6xl md:text-7xl font-bold leading-none mb-6">–ò–¥–µ–∞–ª—å–Ω—ã–µ –Ω–æ–≥—Ç–∏<br>—Å –¥—É—à–æ–π</h1>
            <p class="text-xl max-w-md mx-auto mb-10">–ü—Ä–µ–º–∏—É–º –º–∞–Ω–∏–∫—é—Ä, –Ω–∞—Ä–∞—â–∏–≤–∞–Ω–∏–µ –∏ –∞–≤—Ç–æ—Ä—Å–∫–∏–µ –¥–∏–∑–∞–π–Ω—ã –≤ —É—é—Ç–Ω–æ–π —Å—Ç—É–¥–∏–∏</p>
            <a href="#booking" class="inline-block bg-white text-rose-700 hover:bg-rose-50 font-semibold text-xl px-12 py-6 rounded-3xl shadow-2xl transition">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è —Å–µ–π—á–∞—Å</a>
        </div>
    </section>

    <!-- –ì–ê–õ–ï–†–ï–Ø -->
    <section class="py-20 bg-white">
        <div class="max-w-6xl mx-auto px-6">
            <div class="text-center mb-12">
                <span class="text-rose-600 text-sm tracking-widest">2026</span>
                <h2 class="logo-font text-5xl font-bold mt-2">–†–∞–±–æ—Ç—ã –ê–Ω–∂–µ–ª—ã</h2>
            </div>
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <img src="https://images.unsplash.com/photo-1604654894610-df63bc536371?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="rounded-3xl shadow-xl" alt="gold nails">
                <img src="https://images.unsplash.com/photo-1610992015730-2449a6c7b7c9?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="rounded-3xl shadow-xl" alt="pink pearl">
                <img src="https://images.unsplash.com/photo-1600585154340-be6161a56a9c?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" class="rounded-3xl shadow-xl" alt="chrome">
                <img src="https://picsum.photos/id/1015/800/800" class="rounded-3xl shadow-xl" alt="strass">
                <img src="https://picsum.photos/id/201/800/800" class="rounded-3xl shadow-xl" alt="ombre">
                <img src="https://picsum.photos/id/251/800/800" class="rounded-3xl shadow-xl" alt="french">
            </div>
        </div>
    </section>

    <!-- –ó–ê–ü–ò–°–¨ -->
    <section id="booking" class="py-20 bg-[#fdf2f8]">
        <div class="max-w-2xl mx-auto px-6">
            <h2 class="logo-font text-5xl font-bold text-center mb-3">–í—ã–±–µ—Ä–∏ –≤—Ä–µ–º—è</h2>
            <p class="text-center text-zinc-600 mb-10">–°–≤–æ–±–æ–¥–Ω—ã–µ —Å–ª–æ—Ç—ã ‚Äî –±–µ–ª—ã–µ, –∑–∞–Ω—è—Ç—ã–µ ‚Äî –∫—Ä–∞—Å–Ω—ã–µ</p>

            <div class="bg-white rounded-3xl p-8 shadow-2xl">
                <input id="date" type="date" class="w-full px-6 py-5 border border-rose-200 rounded-3xl text-lg mb-8">

                <div id="time-grid" class="grid grid-cols-4 gap-3 mb-10"></div>

                <button id="book-btn" 
                        class="w-full bg-gradient-to-r from-rose-600 to-pink-600 text-white py-7 rounded-3xl font-semibold text-xl shadow-xl disabled:opacity-50 hidden">
                    –ó–∞–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –≤—ã–±—Ä–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è
                </button>
            </div>
        </div>
    </section>

    <!-- –û–¢–ú–ï–ù–ê -->
    <section class="py-20 bg-white">
        <div class="max-w-md mx-auto px-6 text-center">
            <h2 class="logo-font text-4xl font-bold mb-6">–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å</h2>
            <p class="mb-8 text-zinc-600">–í–≤–µ–¥–∏ —Å–≤–æ–π –Ω–æ–º–µ—Ä ‚Äî –∑–∞–ø–∏—Å—å –∏—Å—á–µ–∑–Ω–µ—Ç –∏–∑ –∫–∞–ª–µ–Ω–¥–∞—Ä—è</p>
            <input id="cancel-phone" type="tel" placeholder="+7 949 837-01-46" 
                   class="w-full px-8 py-6 rounded-3xl border border-zinc-300 text-lg mb-6">
            <button onclick="cancelBooking()" 
                    class="w-full bg-zinc-900 text-white py-6 rounded-3xl font-semibold text-lg">–û—Ç–º–µ–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å</button>
        </div>
    </section>

    <script>
        const WORKER_URL = "https://rough-poetry-89a4.rdkltt8.workers.dev/";   // ‚Üê‚Üê‚Üê –ó–ê–ú–ï–ù–ò –ù–ê –°–í–û–ô

        let selectedTime = null;
        let currentDate = "";

        async function loadAvailable() {
            const date = document.getElementById('date').value;
            if (!date) return;
            currentDate = date;

            const res = await fetch(`${WORKER_URL}?date=${date}`);
            const data = await res.json();

            const grid = document.getElementById('time-grid');
            grid.innerHTML = '';

            const allTimes = ["10:00","10:30","11:00","11:30","12:00","12:30","13:00","13:30","14:00","14:30","15:00","15:30","16:00","16:30","17:00","17:30","18:00","18:30","19:00"];

            allTimes.forEach(t => {
                const booked = data.booked.includes(t);
                const div = document.createElement('div');
                div.className = `time-slot text-center py-4 rounded-2xl font-medium text-sm border ${booked ? 'booked' : 'available border-rose-200 cursor-pointer'}`;
                div.textContent = booked ? t + ' ‚Äî –ó–∞–Ω—è—Ç–æ' : t;
                if (!booked) {
                    div.onclick = () => {
                        document.querySelectorAll('.time-slot').forEach(el => el.classList.remove('ring-2','ring-rose-500'));
                        div.classList.add('ring-2','ring-rose-500');
                        selectedTime = t;
                        document.getElementById('book-btn').classList.remove('hidden');
                    };
                }
                grid.appendChild(div);
            });
        }

        document.getElementById('date').addEventListener('change', loadAvailable);

        // –ö–Ω–æ–ø–∫–∞ –∑–∞–ø–∏—Å–∏
        document.getElementById('book-btn').addEventListener('click', async () => {
            if (!selectedTime || !currentDate) return;

            const name = prompt("–ö–∞–∫ —Ç–µ–±—è –∑–æ–≤—É—Ç?") || "–ö–ª–∏–µ–Ω—Ç";
            const phone = prompt("–¢–≤–æ–π —Ç–µ–ª–µ—Ñ–æ–Ω?") || "+7";

            const formData = new FormData();
            formData.append('type', 'book');
            formData.append('date', currentDate);
            formData.append('time', selectedTime);
            formData.append('name', name);
            formData.append('phone', phone);

            await fetch(WORKER_URL, { method: 'POST', body: formData });
            
            alert(`‚úÖ –¢—ã –∑–∞–ø–∏—Å–∞–Ω–∞ –Ω–∞ ${currentDate} –≤ ${selectedTime}!\n–ê–Ω–∂–µ–ª–∞ —É–∂–µ –ø–æ–ª—É—á–∏–ª–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ª–∏—á–∫—É ‚ù§Ô∏è`);
            loadAvailable(); // –æ–±–Ω–æ–≤–ª—è–µ–º —Å–ª–æ—Ç—ã
            document.getElementById('book-btn').classList.add('hidden');
        });

        async function cancelBooking() {
            const phone = document.getElementById('cancel-phone').value.trim();
            if (!phone) return alert("–í–≤–µ–¥–∏ —Ç–µ–ª–µ—Ñ–æ–Ω");

            const formData = new FormData();
            formData.append('type', 'cancel');
            formData.append('phone', phone);

            await fetch(WORKER_URL, { method: 'POST', body: formData });
            alert('‚ùå –ó–∞–ø–∏—Å—å –æ—Ç–º–µ–Ω–µ–Ω–∞. –ê–Ω–∂–µ–ª–∞ –ø–æ–ª—É—á–∏–ª–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ –ª–∏—á–∫—É.');
            loadAvailable();
        }

        // Init
        window.onload = () => {
            const tomorrow = new Date();
            tomorrow.setDate(tomorrow.getDate() + 1);
            document.getElementById('date').value = tomorrow.toISOString().split('T')[0];
            loadAvailable();
        };
    </script>
</body>
</html>

